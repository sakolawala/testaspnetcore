//////////////////////////////////////////////////////////////////////
// ARGUMENTS
//////////////////////////////////////////////////////////////////////
var target = Argument("target", "Default");
var configuration = Argument("configuration", "Debug");
 
//////////////////////////////////////////////////////////////////////
///    Build Variables
/////////////////////////////////////////////////////////////////////
// The output directory the build artefacts saved too
var outputDir = Directory("./mvMVC/bin") + Directory(configuration);  
var slnFile = "./myMVC.sln";
var buildSettings = new DotNetCoreBuildSettings
     {
         Framework = "netcoreapp1.1",
         Configuration = configuration,
         OutputDirectory = outputDir
     };
//////////////////////////////////////////////////////////////////////
// TASKS
//////////////////////////////////////////////////////////////////////
Task("Clean")
  .Does( () => {
    Information("OutDirectory: {0}", outputDir);
    if (DirectoryExists(outputDir))
    {
        DeleteDirectory(outputDir, recursive:true);
    }
  });

Task("Restore")
  .IsDependentOn("Clean")
  .Does(() => {
        DotNetCoreRestore();
  });

Task("Build")
  .IsDependentOn("Restore")
  .Does(() => {
        DotNetCoreBuild(slnFile);
  });

  Task("Run Tests")
    .IsDependentOn("Build")
    .Does( () => {

    });

//////////////////////////////////////////////////////////////////////
// TASK TARGETS
//////////////////////////////////////////////////////////////////////

Task("Default")
    .IsDependentOn("Build");

//////////////////////////////////////////////////////////////////////
// EXECUTION
//////////////////////////////////////////////////////////////////////

RunTarget(target);